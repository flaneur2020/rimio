# Example configuration for Amberio.
# Optimized for small edge clusters with stable topology.

current_node: edge-node-001

# Registry backend: choose one backend and configure it below.
registry:
  backend: redis # options: etcd | redis
  namespace: edge-cluster-001
  # etcd:
  #   endpoints:
  #     - "http://localhost:2379"
  redis:
    url: "redis://localhost:6379"
    pool_size: 10

initial_cluster:
  nodes:
    - node_id: "edge-node-001"
      bind_addr: "0.0.0.0:8080"
      advertise_addr: "edge-node-001:8080"
      disks:
        - path: /data/disk1
        - path: /data/disk2
    - node_id: "edge-node-002"
      bind_addr: "0.0.0.0:8081"
      advertise_addr: "edge-node-001:8080"
      disks:
        - path: /data/disk3
        - path: /data/disk4
    - node_id: "edge-node-003"
      bind_addr: "0.0.0.0:8082"
      advertise_addr: "edge-node-001:8080"
      disks:
        - path: /data/disk5
        - path: /data/disk6
  replication:
    min_write_replicas: 3
    total_slots: 2048

# Optional archive/cold tier backend.
archive:
  archive_type: s3 # options: s3 | redis
  s3:
    bucket: "amberio-archive"
    region: "us-east-1"
    # endpoint: "http://127.0.0.1:9000" # for MinIO/S3-compatible
    # allow_http: true # set true for non-TLS local endpoints
    credentials:
      access_key_id: "YOUR_ACCESS_KEY_ID"
      secret_access_key: "YOUR_SECRET_ACCESS_KEY"
  # redis:
  #   url: "redis://localhost:6379"
  #   key_prefix: "amberio:archive"

# Optional init-time archive scan import.
# When enabled, this runs during initialization only.
# init_scan:
#   enabled: true
#   redis:
#     url: "redis://localhost:6379"
#     list_key: "amberio:init-scan:list"
#     page_size: 500
